<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Fate Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Jost:wght@400;500&display=swap" rel="stylesheet">
    <style>
        
        body {
            font-family: 'Jost', sans-serif;
        }
        .font-cinzel {
            font-family: 'Cinzel Decorative', cursive;
        }
        /* Shake animation */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
        }
        .shake {
            animation: shake 0.3s ease-in-out;
        }

        /* Glow effect for button */
        @keyframes glow {
            0% { box-shadow: 0 0 5px #fde047, 0 0 10px #fde047; }
            50% { box-shadow: 0 0 20px #facc15, 0 0 30px #facc15; }
            100% { box-shadow: 0 0 5px #fde047, 0 0 10px #fde047; }
        }
        .glow-on-hover {
            animation: glow 2.5s infinite;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-900 via-purple-900 to-indigo-900 min-h-screen flex items-center justify-center p-5 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]">
    <div class="bg-slate-800/50 backdrop-blur-sm rounded-3xl shadow-2xl shadow-purple-500/20 p-8 max-w-lg w-full border border-purple-400/30">
        <h1 class="text-4xl font-cinzel font-bold text-center mb-2 text-yellow-300">Fate Calculator</h1>
        <p class="text-center text-purple-300 mb-8">Unveiling Your Ridiculous Destiny</p>

        <div class="mb-5">
            <label for="name" class="block text-purple-300 font-medium mb-2">Scribe Your Mortal Name:</label>
            <input
                type="text"
                id="name"
                placeholder="e.g., Bartholomew Stardust"
                class="w-full p-3 bg-gray-900/70 border border-purple-500/50 rounded-lg text-white placeholder-gray-500 focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition"
            />
        </div>

        <div class="mb-6">
            <label for="dob" class="block text-purple-300 font-medium mb-2">Reveal Your Star-Chart Date:</label>
            <input
                type="text"
                id="dob"
                placeholder="dd-mm-yyyy"
                class="w-full p-3 bg-gray-900/70 border border-purple-500/50 rounded-lg text-white placeholder-gray-500 focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition"
            />
        </div>

        <button
            id="calculateBtn"
            class="w-full bg-yellow-400 hover:bg-yellow-300 text-gray-900 font-bold py-3 rounded-lg transition duration-200 glow-on-hover text-lg"
        >
            Gaze into the Void โจ
        </button>

        <div id="loadingBarContainer" class="hidden w-full bg-gray-700 rounded-full mt-5">
            <div id="loadingBar" class="h-3 bg-gradient-to-r from-yellow-400 to-purple-500 rounded-full" style="width: 0%"></div>
        </div>

        <div id="message" class="mt-4 hidden p-3 rounded-lg font-bold"></div>

        <div id="results" class="mt-6 text-center">
            <p id="result" class="text-xl font-medium text-white mb-4"></p>
            <div id="lifeAdviceCard" class="mt-6 mb-5 p-4 border-2 border-dashed border-yellow-300/50 rounded-lg bg-purple-900/30 text-yellow-200 font-semibold hidden italic"></div>
             <p id="blinkCount" class="text-purple-300 text-md font-semibold mb-4"></p>
            <div id="milestones-container" class="hidden">
                <h2 class="font-cinzel text-2xl text-yellow-300 mt-6 mb-3">Cosmic Prophecies</h2>
                <ul id="milestones" class="list-none space-y-2 text-left"></ul>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>    
    <script>
        const nameInput = document.getElementById("name");
        const dobInput = document.getElementById("dob");
        const messageDiv = document.getElementById("message");
        const resultDiv = document.getElementById("result");
        const milestonesList = document.getElementById("milestones");
        const milestonesContainer = document.getElementById("milestones-container");
        const calculateBtn = document.getElementById("calculateBtn");
        const loadingBarContainer = document.getElementById("loadingBarContainer");
        const loadingBar = document.getElementById("loadingBar");
        const lifeAdviceCard = document.getElementById("lifeAdviceCard");
        const blinkElem = document.getElementById("blinkCount");

        const marriageMessages = [
            "เดจเดฟเดจเดเตเดเต เดตเดฟเดตเดพเดนเดฎเดฟเดฒเตเดฒ... เดซเดพเดฎเดฟเดฒเดฟ เดตเดพเดเตเดธเตเดเดชเตเดชเต เดเตเดฐเตเดชเตเดชเดฟเดฒเตเด เดชเตเดฐเดคเตเดเตเดทเดฏเดฟเดฒเตเดฒ!",
            "เดตเดฟเดตเดพเดนเดฎเต? เดเดคเตเดฐเต เดจเดฟเดฎเดฟเดทเด เดจเตเดณเตเดจเตเดจ เดชเตเดฐเดนเดธเดจเด เดฎเดพเดคเตเดฐเด!",
            "เดตเดฟเดตเดพเดนเดฎเดพเดฃเต? เดเดจเตเดคเต เดชเดฑเดเตเดเดพเดฒเตเด เดเดคเดพเดฃเดฒเตเดฒเต เดตเดฟเดทเดฏเด!",
            "เดตเดฟเดตเดพเดนเด เดเตเดฃเตเดเต เดชเตเดฐเดฏเตเดเดจเดฎเตเดจเตเดจเตเดฎเดฟเดฒเตเดฒ, เดเดฟเดฒเดชเตเดชเตเตพ เดธเตเดเดจเตเดฏ เดตเตเดซเต เดเดฟเดเตเดเดฟเดฏเตเดเตเดเดพเด!",
            "เดจเดฟเตปเตเดฑเต เดตเดฟเดตเดพเดนเดฎเตเดจเตเดจ เดซเดฏเตฝ เดเดฐเดฟเดเตเดเดฒเตเด เดธเตเดตเต เดเตเดฏเตเดฏเดชเตเดชเตเดเตเดจเตเดจเดฟเดฒเตเดฒ!",
            "เดจเดฟเดจเดเตเดเต เดตเดฟเดตเดพเดนเดฎเต? เดเดฆเตเดฏเด เดธเตเดเดจเตเดฏ เดตเตเดซเตเดฏเตเดเตเดเดฟเดฒเตเด เดเดฟเดเตเดเดเตเดเต!",
            "เดตเดฟเดตเดพเดนเดคเตเดคเตเดเตเดเตเดฑเดฟเดเตเดเต เดเดฒเตเดเดฟเดเตเดเตเดฎเตเดชเตเดดเตเดเตเดเตเด เดเดฐเต เดฌเตเดเตเดเต เดตเดพเดเตเดเดพเดจเตเดณเตเดณ เดธเดฎเดฏเดฎเดพเดฏเตเดเตเดเตเด!",
            "เดตเดฟเดตเดพเดนเด เดจเดเดเตเดเตเด, เดชเดเตเดทเต เดธเตเดฑเตเดฑเต เดฑเดฟเดธเตผเดตเตเดทเตป เดชเตเดฒเตเดฏเดพเดฃเต!",
            "เดจเดฟเดจเดเตเดเต เดตเดฟเดตเดพเดนเดฎเต? เดเดฆเตเดฏเด เดชเดฃเดตเตเด เดจเดฒเตเดฒเตเดฐเต เดธเตเดฏเตเดเตเดเตเด เดคเดฏเตเดฏเดพเดฑเดพเดเตเดเต!",
            "เดตเดฟเดตเดพเดนเดคเตเดคเตเดเตเดเตเดฑเดฟเดเตเดเต เดชเดฑเดฏเตเดฎเตเดชเตเตพ, เดเดฆเตเดฏเด เด เดตเดพเดเตเดธเตเดเดชเตเดชเต เดธเตเดฑเตเดฑเดพเดฑเตเดฑเดธเต เดเดจเตเดจเต เดฎเดพเดฑเตเดฑเต!",
            "เดตเดฟเดตเดพเดนเดฎเต? เดเดฆเตเดฏเด เดจเตเดฑเตเดฑเตเดซเตเดฒเดฟเดเตเดธเต เดธเดฌเตเดธเตเดเตเดฐเดฟเดชเตเดทเตป เดชเตเดคเตเดเตเดเต!",
            "เดจเดฟเตปเตเดฑเต เดตเดฟเดตเดพเดนเดฎเต? เดเดคเตเดฐเต เดเตบเดฒเตเตป เดนเตเดณเดฟเดกเต เดชเดพเดเตเดเตเดเต เดชเตเดฒเตเดฏเดพเดฃเต!",
            "เดตเดฟเดตเดพเดนเด เดจเดเดเตเดเตเด, เดชเดเตเดทเต เดเตเดฑเดเตเดเต เดชเตเดชเตเดชเตผ เดตเตผเดเตเดเตเดเตพ เดเตเดเดฟเดฏเตเดฃเตเดเต!",
            "เดตเดฟเดตเดพเดนเดฎเต? เดเดคเตเดฐเต เดญเดฐเดฃเดชเดฐเดฎเดพเดฏ เดเตเดฒเดฟ เดชเตเดฒเต เดตเดฟเดฐเดธเดฎเดพเดฃเต!",
            "เดจเดฟเดจเดเตเดเต เดตเดฟเดตเดพเดนเดฎเต? เดเดฆเตเดฏเด เดเตเดฑเดเตเดเต เดนเตเดเดตเตผเดเตเดเต เดเตเดฏเตเดฏเต!",
            "เดตเดฟเดตเดพเดนเดฎเตเดจเตเดจเดคเต เดเดฐเต เดกเตเดฒเดฟเดตเดฑเดฟ เดเตผเดกเตผ เดชเตเดฒเตเดฏเดพเดฃเต, เดเดชเตเดชเตเตพ เดตเตเดฃเดฎเตเดเตเดเดฟเดฒเตเด เดเดคเตเดคเดพเด!",
            "เดจเดฟเตปเตเดฑเต เดตเดฟเดตเดพเดนเด เดชเตเดฒเดพเตป เดเตเดฏเตเดคเดคเตเดชเตเดฒเต เดคเดจเตเดจเต เดจเดเดเตเดเตเดฎเต?",
            "เดตเดฟเดตเดพเดนเด เดตเดฐเตเด, เดชเดเตเดทเต เดธเตเดฒเต เดฎเตเดทเดจเดฟเตฝ!",
            "เดตเดฟเดตเดพเดนเดฎเต? เดเดฆเตเดฏเด เดจเดฟเตปเตเดฑเต เดซเตเตบ เดเดพเตผเดเต เดเตเดฏเตเดฏเต!",
            "เดจเดฟเตปเตเดฑเต เดตเดฟเดตเดพเดนเดฎเตเดจเตเดจเดคเต เดเดฐเต เดตเตเดกเดฟเดฏเต เดเตเดฏเดฟเด เดชเตเดฒเตเดฏเดพเดฃเต, เดเดฐเต เดฒเตเดตเดฒเตเด เดฌเตเดฆเตเดงเดฟเดฎเตเดเตเดเตเดฑเดฟเดฏเดคเดพเดฃเต!",
        ];

        const deathMessages = [
            "เดฎเดฐเดฃเด เดเดฑเดชเตเดชเดพเดฃเต, เดชเดเตเดทเต เดเดชเตเดชเตเดดเดฒเตเดฒ. เดเดคเตเดตเดฐเต เดจเตเดฑเตเดฑเตเดซเตเดฒเดฟเดเตเดธเดฟเตฝ เดเดจเตเดคเต เดเดพเดฃเตเด?",
            "เดเดจเดฟเดฏเตเด เดเดฟเดเดจเตเดจเตเดฑเดเตเดเดพเดคเต เดเตเดตเดฟเดคเด เดเดธเตเดตเดฆเดฟเดเตเดเต, เดตเดฏเดธเตเดธเดพเดเตเดฎเตเดชเตเตพ เดเดฑเดเตเดเดพเตป เดงเดพเดฐเดพเดณเด เดธเดฎเดฏเดฎเตเดฃเตเดเดพเดเตเด.",
            "เดตเดฏเดธเตเดธเดพเดฏเดพเตฝ เดเดฟเดฒเดชเตเดชเตเตพ เดเตผเดฎเตเดฎ เดชเตเดฏเตเดเตเดเดพเด, เดชเดเตเดทเต เดเดพเดฏ เดเตเดเดฟเดเตเดเตเดจเตเดจเดคเต เดจเดฟเตผเดคเตเดคเดพเดคเดฟเดฐเดฟเดเตเดเดพเด.",
            "เดเดฒเตเดฒเดพเดตเตผเดเตเดเตเด เดธเดฎเดฏเดฎเตเดคเตเดคเตเด, เดชเดเตเดทเต เดเดคเดฟเดจเตเดฎเตเดฎเตเดชเต เดเตเดฑเดเตเดเต เดจเดพเดเดเด เดเดฃเตเดเดพเดฒเต?",
            "เดชเตเดเตเดเตเดจเตเดจเต เดฎเดฐเดฟเดเตเดเต เดชเตเดเดฐเตเดคเต, เดตเตเดเตเดเดฟเดฒเต เดตเดพเดเตเดธเตเดเดชเตเดชเต เดเตเดฐเตเดชเตเดชเดฟเดฒเตเดณเตเดณเดตเตผ เดเตเดเตเดเดฟเดชเตเดชเตเดเตเด!",
            "เดเดจเตเดจเดฒเต เดตเดฐเต เดจเดฒเตเดฒ เดธเตเดเดฎเดพเดฏเดฟเดฐเตเดจเตเดจเดฟเดฒเตเดฒเต? เดฌเดพเดเตเดเดฟ เดตเดดเดฟเดฏเต เดตเดฐเตเด.",
            "เดฎเดฐเดฃเดตเดพเตผเดคเตเดคเดฏเตเดคเตเดคเตเด, เดชเดเตเดทเต เดเดคเดฟเดจเตเดฎเตเตปเดชเต เดเดฐเต เดเดพเดฏ เดเตเดเดฟเดเตเดเดฃเด.",
            "เดตเตเดฑเตเดคเต เดเดฟเดเดเตเดเดพเดคเต เดชเดพเดเตเดเตเดชเดพเดเต, เดฎเดฐเดฃเด เดเดชเตเดชเตเตพ เดตเตเดฃเดฎเตเดเตเดเดฟเดฒเตเด เดตเดฐเดพเด.",
            "เดเดจเดฟ เดตเตเดฆเดจเดเตพ เดเดฃเตเดเดพเดเดฟเดฒเตเดฒ, เดชเดเตเดทเต เดเดชเตเดชเตเตพ เดเตเดฑเดเตเดเต เดตเดฟเดทเดฎเดฟเดเตเดเต.",
            "เดฎเดฐเดฃเด เดตเดฐเตเด, เดชเดเตเดทเต เดจเดพเดณเดคเตเดคเต เดชเดพเดเตเดเต เดเตเดเตเดเดฟเดเตเดเต เดชเตเดเดพเด.",
            "เดเดตเดธเดพเดจเดฎเดพเดฏเดฟ เดเดจเตเดคเตเดเตเดเดฟเดฒเตเด เดชเดฑเดฏเดพเดจเตเดฃเตเดเต? เดเดคเดฟเดจเตเดฎเตเดฎเตเดชเต เดเดฐเต เดเดตเดฟเตพ เดเดพเดฏ เดเตเดเดฟเดเตเดเดพเด.",
            "เดเดจเดฟเดฏเตเด เดเดฑเดเตเดเดพเตป เดคเตเดจเตเดจเตเดจเตเดจเดฟเดฒเตเดฒเตเดเตเดเดฟเตฝ, เดฎเดฐเดฃเด เดเดเตเดคเตเดคเตเดคเตเดคเดฟเดฏเตเดจเตเดจเต เดเดฐเตเดคเดพเด.",
            "เดเดณเดฟเดเตเดเต เดจเดเดเตเดเดพเตป เดเดจเดฟ เดเดงเดฟเดเด เดธเดฎเดฏเดฎเดฟเดฒเตเดฒ, เดเดจเตเดจเดพเดฒเตเด เดถเตเดฐเดฎเด เดคเตเดเดฐเดฃเด.",
            "เดฎเดฐเดฃเด เดเดฐเต เดธเตเดฑเตเดฑเตเดชเตเดชเต เดธเดฟเดเตเดจเตฝ เดชเตเดฒเตเดฏเดพเดฃเต, เดชเดเตเดทเต เดเดคเตเดตเดฐเต เดเดเตเดเด เดคเตเดเตผเดจเตเดจเต เดชเดฑเตเดฑเต.",
            "เดเดจเดฟ เดจเดฟเดจเตเดจเต เดเดพเดฃเดพเตป เดฎเดฐเดฃเดถเตเดทเด เดเตเดดเดฟเดเตเดเตเดเตเดเตเดเตเดเต เดตเดฐเดพเด.",
            "เดฎเดฐเดฟเดเตเดเตเดจเตเดจเดคเดฟเดจเต เดฎเตเดฎเตเดชเต เดเดฐเต เดเดพเดฏเดฏเตเดเตเดเดฟเดฒเตเด เดตเดพเดเตเดเดฟเดคเตเดคเดฐเดฃเด.",
            "เดเดจเดฟ เดชเดดเดฏ เดเดฅเดเดณเตเดเตเดเต เดชเดฑเดเตเดเต เดฎเดฐเดฃเดคเตเดคเต เดธเตเดตเดพเดเดคเด เดเตเดฏเตเดฏเดพเดจเตเดฐเตเดเตเดเต.",
            "เดฎเดฐเดฃเด เดเดฐเต เดเตเดเตเดเตเดชเดพเดเดพเดฃเต, เดชเดเตเดทเต เด เดฏเดพเดคเตเดฐเดฏเดฟเตฝ เดจเต เดคเดจเดฟเดเตเดเดพเดฏเดฟเดฐเดฟเดเตเดเดฟเดฒเตเดฒ.",
            "เดเดฟเดฐเดฟเดเตเดเดพเตป เดเดจเดฟเดฏเตเด เดธเดฎเดฏเดฎเตเดฃเตเดเต, เดชเดเตเดทเต เดฎเดฐเดฃเด เดเดคเต เดจเดฟเดฎเดฟเดทเดตเตเด เดตเดฐเดพเด.",
            "เดเดตเดธเดพเดจเด เดตเดจเตเดจเตเดเตเดฐเตเดจเตเดจเดคเต เดเดฐเต เดจเดฒเตเดฒ เดชเดพเดเตเดเดพเดฏเดฟเดฐเดฟเดเตเดเดเตเดเต.",
        ];

        const lifeAdvice = [
          { maxAge: 12, advice: "เดเตเดเตเดเต, เดชเดพเดเดชเตเดธเตเดคเดเด เดตเดพเดฏเดฟเดเตเดเดฃเด เดเดฒเตเดฒเต? YouTube-เตฝ เดฎเดพเดคเตเดฐเด เดเดฃเตเดเต เดคเตเดฐเดฟเดฒเตเดฒ." },
          { maxAge: 18, advice: "เดชเดเดจเด เดเดฟเดเตเดเดฟเดฒเตเดฒเต? เดเดเตเดเดฟเตฝ Netflix เดธเดฌเตเดธเตเดเตเดฐเดฟเดชเตเดทเตป เดเตเดฑเดเตเดเดพเตป เดธเดฎเดฏเดฎเดพเดฃเต." },
          { maxAge: 30, advice: "เดตเดฒเดฟเดฏ เดเดณเดพเดฏเดคเดฒเตเดฒเต? เดชเดฃเดตเตเด เดเตเดตเดฟเดคเดตเตเด เดคเดฎเตเดฎเดฟเตฝ เดชเดฑเตเดฑเดฟเดชเตเดชเตเดเตเดเดพเตป เดชเดเดฟเดเตเดเต." },
          { maxAge: 50, advice: "เดตเดฏเดธเดพเดฏเดฟ, เดชเดเตเดทเต เดฎเดคเดฟ, เดฌเดธเตเดธเต เดฎเดคเดฟโฆ เดเดคเดฟเดฒเตเด เดเดเดจเตเดจเต เดชเตเดตเดพเตป เดชเดเดฟเดเตเดเต." },
          { maxAge: 80, advice: "เดจเดฟเดจเดเตเดเต เดเดฑเดฟเดเตเดเต เดชเดฑเดฏเดพเด, เดเตเดตเดฟเดคเด เดคเดเตเดเตเดจเตเดจเต เดเดฏเดพเดฒเตเด เดตเดฃเตเดเดฟ เดเดเดฟเดเตเดเตเดจเตเดจเดชเตเดฒเต." },
          { maxAge: 200, advice: "เดเดดเดฟเดเตเด เดเดพเดฒเดเตเดเดณเดฟเดฒเต เดชเดฃเตเดเดพเดฐเดคเตเดคเดฟเดฐเดฟเดเดฅเดเดณเดฒเตเดฒเต เดเตเดเตเดเดฟเดเตเดเตเดณเตเดณเดคเต? เดเดจเดฟ เดเดคเตเด เดฎเตเดเตเดเดฟเดตเดฏเตเดเตเดเดพเด." }
        ];

        function showMessage(msg, type) {
            messageDiv.textContent = msg;
            messageDiv.className = `mt-4 p-3 rounded-lg font-bold text-white ${type === "error" ? "bg-red-500/80" : "bg-green-500/80"}`;
            messageDiv.classList.remove("hidden");
        }

        function getLifeAdvice(age) {
            for (const adviceObj of lifeAdvice) {
                if (age <= adviceObj.maxAge) {
                    return adviceObj.advice;
                }
            }
            return "เดเตเดตเดฟเดคเด เดตเดฒเดฟเดฏ เดเดณเดฟเดฏเดพเดฃเต, เดเดคเต เดเดธเตเดตเดฆเดฟเดเตเดเต!";
        }
        
        function fireConfetti() {
            var end = Date.now() + (2 * 1000);
            var colors = ['#fde047', '#a855f7', '#ffffff'];

            (function frame() {
              confetti({
                particleCount: 3,
                angle: 60,
                spread: 55,
                origin: { x: 0 },
                colors: colors
              });
              confetti({
                particleCount: 3,
                angle: 120,
                spread: 55,
                origin: { x: 1 },
                colors: colors
              });

              if (Date.now() < end) {
                requestAnimationFrame(frame);
              }
            }());
        }

        function showResults(userName, birthDate, years, months, days) {
            resultDiv.innerHTML = `<span class="font-cinzel text-yellow-300">Greetings, ${userName}!</span><br>The cosmos reveals you have orbited the sun for <span class="text-white font-bold">${years}</span> years, <span class="text-white font-bold">${months}</span> months, and <span class="text-white font-bold">${days}</span> days.`;

            const totalDays = years * 365 + months * 30 + days;
            const totalMinutes = totalDays * 24 * 60;
            const blinksPerMinute = 15;
            const totalBlinks = Math.round(totalMinutes * blinksPerMinute);
            
            blinkElem.textContent = `๐๏ธ You've blinked approx. ${totalBlinks.toLocaleString()} times. A truly pointless statistic.`;
            
            const advice = getLifeAdvice(years);
            lifeAdviceCard.textContent = `๐ A Prophecy For You: ${advice}`;
            lifeAdviceCard.classList.remove("hidden");

            function randomBetween(min, max) {
               return Math.floor(Math.random() * (max - min + 1)) + min;
            }

            const milestones = [
                { label: "1st Solar Return", yearsToAdd: 1 },
                { label: "The Great Awakening (18th Return)", yearsToAdd: 18 },
                { label: "The 'Adulting' Illusion (21st Return)", yearsToAdd: 21 },
                { label: "Mid-life Cosmic Shift (50th Return)", yearsToAdd: 50 },
                { label: "The Centennial Star (100th Return)", yearsToAdd: 100 },
                { label: "Fated Union (Marriage)", yearsToAdd: randomBetween(25, 35) },
                { label: "Return to Stardust (Death)", yearsToAdd: randomBetween(75, 95) },
            ];

            milestonesList.innerHTML = "";
            milestonesContainer.classList.remove("hidden");

            milestones.forEach((ms) => {
                const milestoneDate = new Date(
                    birthDate.getFullYear() + ms.yearsToAdd,
                    birthDate.getMonth(),
                    birthDate.getDate()
                );
                const dateStr = milestoneDate.toLocaleDateString("en-GB", {day: 'numeric', month: 'long', year: 'numeric'});

                let msg = "";
                if (ms.label.includes("Fated Union")) {
                    const marriageMsg = marriageMessages[Math.floor(Math.random() * marriageMessages.length)];
                    msg = `<strong>${ms.label}:</strong> Around ${dateStr} <br> <span class="text-sm text-red-400 italic pl-4">- ${marriageMsg}</span>`;
                } else if (ms.label.includes("Return to Stardust")) {
                    const deathMsg = deathMessages[Math.floor(Math.random() * deathMessages.length)];
                    msg = `<strong>${ms.label}:</strong> Around ${dateStr} <br> <span class="text-sm text-red-400 italic pl-4">- ${deathMsg}</span>`;
                } else {
                    msg = `<strong>${ms.label}:</strong> ${dateStr}`;
                }

                const li = document.createElement("li");
                li.innerHTML = `โญ ${msg}`;
                li.className = "text-purple-200 bg-gray-900/50 p-3 rounded-lg border-l-4 border-yellow-400";
                milestonesList.appendChild(li);
            });
            
            fireConfetti();
        }

        function calculateAge() {
            const userName = nameInput.value.trim();
            const dobStr = dobInput.value.trim();

            if (!userName) {
                showMessage("The stars demand a name!", "error");
                nameInput.classList.add("shake");
                setTimeout(() => nameInput.classList.remove("shake"), 500);
                return;
            }

            if (!dobStr) {
                showMessage("Your birth date is required by the cosmos.", "error");
                dobInput.classList.add("shake");
                setTimeout(() => dobInput.classList.remove("shake"), 500);
                return;
            }

            const dobPattern = /^(\d{2})-(\d{2})-(\d{4})$/;
            const match = dobStr.match(dobPattern);
            if (!match) {
                showMessage("The universe dislikes this date format. Use dd-mm-yyyy.", "error");
                dobInput.classList.add("shake");
                setTimeout(() => dobInput.classList.remove("shake"), 500);
                return;
            }

            const day = parseInt(match[1], 10);
            const month = parseInt(match[2], 10) - 1;
            const year = parseInt(match[3], 10);

            const birthDate = new Date(year, month, day);
            if (
                birthDate.getFullYear() !== year ||
                birthDate.getMonth() !== month ||
                birthDate.getDate() !== day
            ) {
                showMessage("That's not a real date, you silly mortal.", "error");
                dobInput.classList.add("shake");
                setTimeout(() => dobInput.classList.remove("shake"), 500);
                return;
            }

            const now = new Date();
            if (birthDate > now) {
                showMessage("Are you a time traveler? Enter a date from the past.", "error");
                dobInput.classList.add("shake");
                setTimeout(() => dobInput.classList.remove("shake"), 500);
                return;
            }

            messageDiv.classList.add("hidden");
            resultDiv.textContent = "";
            milestonesList.innerHTML = "";
            milestonesContainer.classList.add("hidden");
            lifeAdviceCard.classList.add("hidden");
            blinkElem.textContent = "";
            loadingBarContainer.classList.remove("hidden");
            loadingBar.style.width = "0%";
            calculateBtn.disabled = true;
            calculateBtn.textContent = "Consulting the Oracle...";

            let width = 0;
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                    loadingBarContainer.classList.add("hidden");
                    calculateBtn.disabled = false;
                    calculateBtn.textContent = "Gaze into the Void โจ";
                    
                    let years = now.getFullYear() - birthDate.getFullYear();
                    let months = now.getMonth() - birthDate.getMonth();
                    let days = now.getDate() - birthDate.getDate();

                    if (days < 0) {
                        months--;
                        days += new Date(now.getFullYear(), now.getMonth(), 0).getDate();
                    }
                    if (months < 0) {
                        years--;
                        months += 12;
                    }

                    showResults(userName, birthDate, years, months, days);
                } else {
                    width += 2;
                    loadingBar.style.width = width + "%";
                }
            }, 40);
        }

        calculateBtn.addEventListener("click", calculateAge);
    </script>
</body>
</html>