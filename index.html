<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Creative Age Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Shake animation */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
        }
        .shake {
            animation: shake 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-gradient-to-r from-blue-100 to-purple-200 min-h-screen flex items-center justify-center p-5">
    <div class="bg-white rounded-2xl shadow-xl p-8 max-w-lg w-full">
        <h1 class="text-3xl font-extrabold text-center mb-6 text-purple-600">Life Calculator</h1>

        <!-- Name Input -->
        <div class="mb-4">
            <label for="name" class="block text-gray-700 font-medium mb-1">Enter your Name:</label>
            <input
                type="text"
                id="name"
                placeholder="Your full name"
                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
            />
        </div>

        <!-- DOB Input -->
        <div class="mb-4">
            <label for="dob" class="block text-gray-700 font-medium mb-1">Enter your Date of Birth:</label>
            <input
                type="text"
                id="dob"
                placeholder="dd-mm-yyyy"
                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
            />
        </div>

        <!-- Button -->
        <button
            id="calculateBtn"
            class="w-full bg-purple-500 hover:bg-purple-600 text-white font-semibold py-3 rounded-lg transition duration-200"
        >
            Calculate Age
        </button>

        <!-- Loading Bar -->
        <div id="loadingBarContainer" class="hidden w-full bg-gray-300 rounded-lg mt-4">
            <div id="loadingBar" class="h-3 bg-purple-500 rounded-lg" style="width: 0%"></div>
        </div>

        <!-- Messages -->
        <div id="message" class="mt-4 hidden p-3 rounded-lg"></div>

        <!-- Results -->
        <div id="results" class="mt-6">
            <p id="result" class="text-lg font-medium text-gray-800 mb-4"></p>
            <ul id="milestones" class="list-disc pl-5 space-y-1"></ul>
            <!-- Life Advice Card -->
            <div id="lifeAdviceCard" class="mt-6 p-4 border border-purple-300 rounded-lg bg-purple-50 text-purple-700 font-semibold hidden"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>    
    <script>
        const nameInput = document.getElementById("name");
        const dobInput = document.getElementById("dob");
        const messageDiv = document.getElementById("message");
        const resultDiv = document.getElementById("result");
        const milestonesList = document.getElementById("milestones");
        const calculateBtn = document.getElementById("calculateBtn");
        const loadingBarContainer = document.getElementById("loadingBarContainer");
        const loadingBar = document.getElementById("loadingBar");
        const lifeAdviceCard = document.getElementById("lifeAdviceCard");

        const marriageMessages = [
            "നിനക്ക് വിവാഹമില്ല... ഫാമിലി വാട്സ്ആപ്പ് ഗ്രൂപ്പിലും പ്രതീക്ഷയില്ല!",
            "വിവാഹമോ? അതൊരു നിമിഷം നീളുന്ന പ്രഹസനം മാത്രം!",
            "വിവാഹമാണോ? എന്തു പറഞ്ഞാലും അതാണല്ലോ വിഷയം!",
            "വിവാഹം കൊണ്ട് പ്രയോജനമൊന്നുമില്ല, ചിലപ്പോൾ സൗജന്യ വൈഫൈ കിട്ടിയേക്കാം!",
            "നിൻ്റെ വിവാഹമെന്ന ഫയൽ ഒരിക്കലും സേവ് ചെയ്യപ്പെടുന്നില്ല!",
            "നിനക്ക് വിവാഹമോ? ആദ്യം സൗജന്യ വൈഫൈയെങ്കിലും കിട്ടട്ടെ!",
            "വിവാഹത്തെക്കുറിച്ച് ആലോചിക്കുമ്പോഴേക്കും ഒരു ബൈക്ക് വാങ്ങാനുള്ള സമയമായേക്കും!",
            "വിവാഹം നടക്കും, പക്ഷേ സീറ്റ് റിസർവേഷൻ പോലെയാണ്!",
            "നിനക്ക് വിവാഹമോ? ആദ്യം പണവും നല്ലൊരു സ്യൂട്ടും തയ്യാറാക്കൂ!",
            "വിവാഹത്തെക്കുറിച്ച് പറയുമ്പോൾ, ആദ്യം ആ വാട്സ്ആപ്പ് സ്റ്റാറ്റസ് ഒന്ന് മാറ്റൂ!",
            "വിവാഹമോ? ആദ്യം നെറ്റ്ഫ്ലിക്സ് സബ്സ്ക്രിപ്ഷൻ പുതുക്കൂ!",
            "നിൻ്റെ വിവാഹമോ? അതൊരു ഓൺലൈൻ ഹോളിഡേ പാക്കേജ് പോലെയാണ്!",
            "വിവാഹം നടക്കും, പക്ഷേ കുറച്ച് പേപ്പർ വർക്കുകൾ കൂടിയുണ്ട്!",
            "വിവാഹമോ? അതൊരു ഭരണപരമായ ജോലി പോലെ വിരസമാണ്!",
            "നിനക്ക് വിവാഹമോ? ആദ്യം കുറച്ച് ഹോംവർക്ക് ചെയ്യൂ!",
            "വിവാഹമെന്നത് ഒരു ഡെലിവറി ഓർഡർ പോലെയാണ്, എപ്പോൾ വേണമെങ്കിലും എത്താം!",
            "നിൻ്റെ വിവാഹം പ്ലാൻ ചെയ്തതുപോലെ തന്നെ നടക്കുമോ?",
            "വിവാഹം വരും, പക്ഷേ സ്ലോ മോഷനിൽ!",
            "വിവാഹമോ? ആദ്യം നിൻ്റെ ഫോൺ ചാർജ് ചെയ്യൂ!",
            "നിൻ്റെ വിവാഹമെന്നത് ഒരു വീഡിയോ ഗെയിം പോലെയാണ്, ഓരോ ലെവലും ബുദ്ധിമുട്ടേറിയതാണ്!",
        ];

        const deathMessages = [
            "മരണം ഉറപ്പാണ്, പക്ഷേ ഇപ്പോഴല്ല. അതുവരെ നെറ്റ്ഫ്ലിക്സിൽ എന്ത് കാണും?",
            "ഇനിയും കിടന്നുറങ്ങാതെ ജീവിതം ആസ്വദിക്കൂ, വയസ്സാകുമ്പോൾ ഉറങ്ങാൻ ധാരാളം സമയമുണ്ടാകും.",
            "വയസ്സായാൽ ചിലപ്പോൾ ഓർമ്മ പോയേക്കാം, പക്ഷേ ചായ കുടിക്കുന്നത് നിർത്താതിരിക്കാം.",
            "എല്ലാവർക്കും സമയമെത്തും, പക്ഷേ അതിനുമുമ്പ് കുറച്ച് നാടകം കണ്ടാലോ?",
            "പെട്ടെന്ന് മരിച്ചു പോകരുത്, വീട്ടിലെ വാട്സ്ആപ്പ് ഗ്രൂപ്പിലുള്ളവർ ഞെട്ടിപ്പോകും!",
            "ഇന്നലെ വരെ നല്ല സുഖമായിരുന്നില്ലേ? ബാക്കി വഴിയേ വരും.",
            "മരണവാർത്തയെത്തും, പക്ഷേ അതിനുമുൻപ് ഒരു ചായ കുടിക്കണം.",
            "വെറുതെ കിടക്കാതെ പാട്ടുപാടൂ, മരണം എപ്പോൾ വേണമെങ്കിലും വരാം.",
            "ഇനി വേദനകൾ ഉണ്ടാകില്ല, പക്ഷേ ഇപ്പോൾ കുറച്ച് വിഷമിക്കൂ.",
            "മരണം വരും, പക്ഷേ നാളത്തെ പാട്ട് കേട്ടിട്ട് പോകാം.",
            "അവസാനമായി എന്തെങ്കിലും പറയാനുണ്ടോ? അതിനുമുമ്പ് ഒരു കവിൾ ചായ കുടിക്കാം.",
            "ഇനിയും ഉറങ്ങാൻ തോന്നുന്നില്ലെങ്കിൽ, മരണം അടുത്തെത്തിയെന്ന് കരുതാം.",
            "കളിച്ചു നടക്കാൻ ഇനി അധികം സമയമില്ല, എന്നാലും ശ്രമം തുടരണം.",
            "മരണം ഒരു സ്റ്റോപ്പ് സിഗ്നൽ പോലെയാണ്, പക്ഷേ അതുവരെ ഓട്ടം തുടർന്നേ പറ്റൂ.",
            "ഇനി നിന്നെ കാണാൻ മരണശേഷം കോഴിക്കോട്ടേക്ക് വരാം.",
            "മരിക്കുന്നതിന് മുമ്പ് ഒരു ചായയെങ്കിലും വാങ്ങിത്തരണം.",
            "ഇനി പഴയ കഥകളൊക്കെ പറഞ്ഞ് മരണത്തെ സ്വാഗതം ചെയ്യാനൊരുങ്ങൂ.",
            "മരണം ഒരു കെട്ടുപാടാണ്, പക്ഷേ ആ യാത്രയിൽ നീ തനിച്ചായിരിക്കില്ല.",
            "ചിരിക്കാൻ ഇനിയും സമയമുണ്ട്, പക്ഷേ മരണം ഏത് നിമിഷവും വരാം.",
            "അവസാനം വന്നുചേരുന്നത് ഒരു നല്ല പാട്ടായിരിക്കട്ടെ.",
        ];

        // Malayalam sarcastic roast style life advice cards
        const lifeAdvice = [
          { maxAge: 12, advice: "കുഞ്ഞേ, പാഠപുസ്തകം വായിക്കണം അല്ലേ? YouTube-ൽ മാത്രം കണ്ടു തീരില്ല." },
          { maxAge: 18, advice: "പഠനം കിട്ടില്ലേ? എങ്കിൽ Netflix സബ്സ്ക്രിപ്ഷൻ കുറക്കാൻ സമയമാണ്." },
          { maxAge: 30, advice: "വലിയ ആളായതല്ലേ? പണവും ജീവിതവും തമ്മിൽ പറ്റിപ്പോക്കാൻ പഠിക്കൂ." },
          { maxAge: 50, advice: "വയസായി, പക്ഷേ മതി, ബസ്സ് മതി… അതിലും അകന്നു പോവാൻ പഠിക്കൂ." },
          { maxAge: 80, advice: "നിനക്ക് അറിഞ്ഞ് പറയാം, ജീവിതം തക്കൂന്നു ആയാലും വണ്ടി ഓടിക്കുന്നപോലെ." },
          { maxAge: 200, advice: "കഴിഞ്ഞ കാലങ്ങളിലെ പണ്ടാരത്തിരികഥകളല്ലേ കേട്ടിട്ടുള്ളത്? ഇനി അതും മുട്ടിവയ്ക്കാം." }
        ];

        function showMessage(msg, type) {
            messageDiv.textContent = msg;
            messageDiv.className = `mt-4 p-3 rounded-lg text-white ${type === "error" ? "bg-red-500" : "bg-green-500"}`;
            messageDiv.classList.remove("hidden");
        }

        function getLifeAdvice(age) {
            for (const adviceObj of lifeAdvice) {
                if (age <= adviceObj.maxAge) {
                    return adviceObj.advice;
                }
            }
            return "ജീവിതം വലിയ കളിയാണ്, അത് ആസ്വദിക്കൂ!";
        }

        function showResults(userName, birthDate, years, months, days) {
            // Display age
            resultDiv.textContent = `Hello ${userName}! You are ${years} years, ${months} months, and ${days} days old.`;

            // Calculate total days lived (approximate)
            const totalDays = years * 365 + months * 30 + days;

            // Calculate total minutes lived
            const totalMinutes = totalDays * 24 * 60;

            // Average blinks per minute
            const blinksPerMinute = 15;

            // Total blinks
            const totalBlinks = Math.round(totalMinutes * blinksPerMinute);

            // Create or update blink count element
            let blinkElem = document.getElementById("blinkCount");
            if (!blinkElem) {
                blinkElem = document.createElement("p");
                blinkElem.id = "blinkCount";
                blinkElem.className = "text-gray-700 text-md font-semibold mb-4";
                resultDiv.parentNode.insertBefore(blinkElem, milestonesList);
            }
            blinkElem.textContent = `👁️ You have blinked approximately ${totalBlinks.toLocaleString()} times since you were born!`;

            // Show a sarcastic life advice card based on age
            const advice = getLifeAdvice(years);
            lifeAdviceCard.textContent = `🔥 ജീവിത ഉപദേശം: ${advice}`;
            lifeAdviceCard.classList.remove("hidden");

            function randomBetween(min, max) {
               return Math.floor(Math.random() * (max - min + 1)) + min;
            }

            // Calculate milestones from birthDate
            const milestones = [
                { label: "1st Birthday", yearsToAdd: 1 },
                { label: "18th Birthday", yearsToAdd: 18 },
                { label: "21st Birthday", yearsToAdd: 21 },
                { label: "50th Birthday", yearsToAdd: 50 },
                { label: "100th Birthday", yearsToAdd: 100 },
                { label: "Marriage Date (est.)", yearsToAdd: randomBetween(25, 35) },
                { label: "Estimated Date of Death", yearsToAdd: randomBetween(75, 95) },
            ];

            milestonesList.innerHTML = "";

            milestones.forEach((ms) => {
                const milestoneDate = new Date(
                    birthDate.getFullYear() + ms.yearsToAdd,
                    birthDate.getMonth(),
                    birthDate.getDate()
                );
                const dateStr = milestoneDate.toLocaleDateString("en-GB");

                let msg = "";
                if (ms.label === "Marriage Date (est.)") {
                    const marriageMsg = marriageMessages[Math.floor(Math.random() * marriageMessages.length)];
                    msg = `${ms.label}: ${dateStr} — <span class="text-red-600">${marriageMsg}</span>`;
                } else if (ms.label === "Estimated Date of Death") {
                    const deathMsg = deathMessages[Math.floor(Math.random() * deathMessages.length)];
                    msg = `${ms.label}: ${dateStr} — <span class="text-red-600">${deathMsg}</span>`;
                } else {
                    msg = `${ms.label}: ${dateStr}`;
                }

                const li = document.createElement("li");
                li.innerHTML = msg;
                li.className = "text-gray-700";
                milestonesList.appendChild(li);
            });

            // Confetti
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 },
            });
        }

        function calculateAge() {
            const userName = nameInput.value.trim();
            const dobStr = dobInput.value.trim();

            if (!userName) {
                showMessage("Please enter your name.", "error");
                nameInput.classList.add("shake");
                setTimeout(() => nameInput.classList.remove("shake"), 500);
                return;
            }

            if (!dobStr) {
                showMessage("Please enter your date of birth.", "error");
                dobInput.classList.add("shake");
                setTimeout(() => dobInput.classList.remove("shake"), 500);
                return;
            }

            // Validate DOB format dd-mm-yyyy
            const dobPattern = /^(\d{2})-(\d{2})-(\d{4})$/;
            const match = dobStr.match(dobPattern);
            if (!match) {
                showMessage("Invalid date format. Use dd-mm-yyyy.", "error");
                dobInput.classList.add("shake");
                setTimeout(() => dobInput.classList.remove("shake"), 500);
                return;
            }

            const day = parseInt(match[1], 10);
            const month = parseInt(match[2], 10) - 1; // zero-based month
            const year = parseInt(match[3], 10);

            const birthDate = new Date(year, month, day);
            if (
                birthDate.getFullYear() !== year ||
                birthDate.getMonth() !== month ||
                birthDate.getDate() !== day
            ) {
                showMessage("Invalid date. Please enter a real date.", "error");
                dobInput.classList.add("shake");
                setTimeout(() => dobInput.classList.remove("shake"), 500);
                return;
            }

            const now = new Date();
            if (birthDate > now) {
                showMessage("You are not born yet! Enter a valid past date.", "error");
                dobInput.classList.add("shake");
                setTimeout(() => dobInput.classList.remove("shake"), 500);
                return;
            }

            // Reset UI and show loading bar
            messageDiv.classList.add("hidden");
            resultDiv.textContent = "";
            milestonesList.innerHTML = "";
            lifeAdviceCard.classList.add("hidden");
            loadingBarContainer.classList.remove("hidden");
            loadingBar.style.width = "0%";

            // Animate loading bar over 2.5 seconds
            let width = 0;
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                    loadingBarContainer.classList.add("hidden");
                    // Calculate age in years, months, days
                    let years = now.getFullYear() - birthDate.getFullYear();
                    let months = now.getMonth() - birthDate.getMonth();
                    let days = now.getDate() - birthDate.getDate();

                    if (days < 0) {
                        months--;
                        days += new Date(now.getFullYear(), now.getMonth(), 0).getDate();
                    }
                    if (months < 0) {
                        years--;
                        months += 12;
                    }

                    showResults(userName, birthDate, years, months, days);
                } else {
                    width += 2;
                    loadingBar.style.width = width + "%";
                }
            }, 50);
        }

        calculateBtn.addEventListener("click", calculateAge);
    </script>
</body>
</html>
